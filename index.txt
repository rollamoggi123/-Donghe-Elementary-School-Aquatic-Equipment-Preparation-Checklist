<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水域物品準備清單</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
        }
        .accordion-button {
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        .accordion-content.open {
            max-height: 1000px; /* 足夠大的值以確保所有內容都能展開 */
            transition: max-height 0.5s ease-in;
        }
    </style>
</head>
<body class="p-4 sm:p-8 md:p-12">

    <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl p-6 sm:p-8">
        <h1 class="text-3xl sm:text-4xl font-bold text-center mb-6 text-indigo-800">水域物品準備清單</h1>
        <p class="text-center text-gray-600 mb-8">點擊各項類別以展開或收合清單。</p>

        <div id="accordion-container" class="space-y-4">
            <!-- JavaScript will generate the accordion items here -->
        </div>
    </div>

    <script>
        // 將 CSV 檔案內容結構化，分組並加入備註
        const checklistGroups = {
            '船隻與設備': [
                { name: "獨木舟", quantity: "", checked: false, note: "活水湖貨櫃: 1參15雙10單" },
                { name: "獨木舟槳", quantity: "40", checked: false, note: "活水湖貨櫃: 40" },
                { name: "SUP", quantity: "", checked: false, note: "活水湖貨櫃: 黃20藍23槳43" },
                { name: "凹型泡棉墊", quantity: "", checked: false, note: "活水湖貨櫃: 2個" }
            ],
            '個人裝備': [
                { name: "頭盔", quantity: "", checked: false, note: "活水湖貨櫃: 30黃5紅" },
                { name: "救生衣", quantity: "", checked: false, note: "活水湖貨櫃: 20大20小4小小" },
                { name: "毛巾衣", quantity: "", checked: false, note: "" },
                { name: "黃T", quantity: "", checked: false, note: "" }
            ],
            '活動設施與場地佈置': [
                { name: "帳篷", quantity: "", checked: false, note: "活水湖貨櫃: 2頂1側雨擋" },
                { name: "更衣帳", quantity: "", checked: false, note: "活水湖貨櫃: 4頂" },
                { name: "桌子", quantity: "", checked: false, note: "活水湖貨櫃: 折疊4" },
                { name: "椅子", quantity: "", checked: false, note: "活水湖貨櫃: 4" },
                { name: "水域宣導板", quantity: "", checked: false, note: "活水湖貨櫃: 1" },
                { name: "布條", quantity: "", checked: false, note: "" },
                { name: "行動馬桶", quantity: "", checked: false, note: "活水湖貨櫃: 芳香錠" },
                { name: "拉船繩", quantity: "", checked: false, note: "" },
                { name: "飲用水架", quantity: "", checked: false, note: "活水湖貨櫃: 水嘴" },
                { name: "防水布", quantity: "", checked: false, note: "" }
            ],
            '安全與急救': [
                { name: "AED", quantity: "", checked: false, note: "活水湖貨櫃: 急救箱" },
                { name: "浮球", quantity: "", checked: false, note: "活水湖貨櫃: 五顆五錨" },
                { name: "哨子", quantity: "", checked: false, note: "" }
            ],
            '攝影與通訊器材': [
                { name: "對講機", quantity: "", checked: false, note: "" },
                { name: "望遠鏡", quantity: "", checked: false, note: "" },
                { name: "小蜜蜂", quantity: "", checked: false, note: "" },
                { name: "攝影器材", quantity: "", checked: false, note: "Gopro、TG、配件電池" }
            ],
            '消耗品與雜項': [
                { name: "水桶", quantity: "", checked: false, note: "" },
                { name: "冰桶", quantity: "", checked: false, note: "" },
                { name: "垃圾袋", quantity: "", checked: false, note: "" },
                { name: "衛生紙 、濕紙巾", quantity: "", checked: false, note: "" },
                { name: "茶點、水", quantity: "", checked: false, note: "" },
                { name: "HDMI線", quantity: "", checked: false, note: "" },
                { name: "小藍白貨櫃鑰匙", quantity: "", checked: false, note: "" },
                { name: "全開紙", quantity: "", checked: false, note: "" },
                { name: "麥克筆、原子筆", quantity: "", checked: false, note: "" }
            ],
            '行政與文件': [
                { name: "領據", quantity: "", checked: false, note: "講師、助教、交通費、住宿費、救生員" },
                { name: "風險告知書", quantity: "", checked: false, note: "" },
                { name: "水域活動安全檢核表", quantity: "", checked: false, note: "" },
                { name: "消像權使用說明書", quantity: "", checked: false, note: "" },
                { name: "保險", quantity: "", checked: false, note: "" }
            ]
        };

        // 頁面加載完成後執行
        document.addEventListener('DOMContentLoaded', () => {
            const accordionContainer = document.getElementById('accordion-container');

            // 動態生成手風琴項目
            for (const [groupName, items] of Object.entries(checklistGroups)) {
                const button = document.createElement('button');
                button.className = 'accordion-button w-full flex justify-between items-center bg-gray-100 hover:bg-gray-200 text-left p-4 rounded-xl font-medium text-lg focus:outline-none transition-all duration-300';
                button.innerHTML = `
                    <span>${groupName}</span>
                    <svg class="w-5 h-5 transform transition-transform duration-300" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                `;
                button.setAttribute('aria-expanded', 'false');

                const content = document.createElement('div');
                content.className = 'accordion-content bg-white p-4 rounded-b-xl border-t-2 border-gray-100';
                
                const table = document.createElement('table');
                table.className = 'min-w-full divide-y divide-gray-200';
                const tableHead = document.createElement('thead');
                tableHead.className = 'bg-indigo-50';
                tableHead.innerHTML = `
                    <tr>
                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider w-1/3">名稱</th>
                        <th scope="col" class="px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider w-1/6">勾選</th>
                        <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider w-1/2">備註</th>
                    </tr>
                `;
                const tableBody = document.createElement('tbody');
                tableBody.className = 'bg-white divide-y divide-gray-200';
                
                items.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-gray-50 transition-colors duration-200';
                    row.innerHTML = `
                        <td class="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.name}</td>
                        <td class="px-4 py-4 whitespace-nowrap text-sm text-center">
                            <input type="checkbox" class="h-5 w-5 text-indigo-600 rounded focus:ring-indigo-500" ${item.checked ? 'checked' : ''}>
                        </td>
                        <td class="px-4 py-4 text-sm text-gray-500">${item.note}</td>
                    `;
                    tableBody.appendChild(row);
                });

                table.appendChild(tableHead);
                table.appendChild(tableBody);
                content.appendChild(table);

                accordionContainer.appendChild(button);
                accordionContainer.appendChild(content);

                // 綁定點擊事件
                button.addEventListener('click', () => {
                    const isOpen = content.classList.contains('open');
                    
                    // 關閉所有手風琴
                    document.querySelectorAll('.accordion-content.open').forEach(item => {
                        item.classList.remove('open');
                        item.previousElementSibling.classList.remove('active');
                        item.previousElementSibling.querySelector('svg').style.transform = 'rotate(0deg)';
                        item.previousElementSibling.setAttribute('aria-expanded', 'false');
                    });

                    // 如果原本是關閉的，則打開當前手風琴
                    if (!isOpen) {
                        content.classList.add('open');
                        button.classList.add('active');
                        button.querySelector('svg').style.transform = 'rotate(180deg)';
                        button.setAttribute('aria-expanded', 'true');
                    }
                });
            }
        });
    </script>
</body>
</html>
